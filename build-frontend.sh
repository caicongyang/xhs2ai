#!/bin/bash

# 前端构建脚本

echo "================================================"
echo "      前端静态文件构建脚本"
echo "================================================"

# 进入前端目录
cd web

# 安装依赖
echo "正在安装依赖..."
npm ci

# 构建前端应用
echo "正在构建Next.js应用..."
npm run build

# 检查输出目录是否存在
if [ -d "out" ]; then
    echo "构建成功! 静态文件已生成在 web/out 目录中"
    echo "文件列表:"
    ls -la out
else
    echo "构建失败! out目录不存在"
    exit 1
fi

# 返回到上层目录
cd ..

echo ""
echo "================================================"
echo "静态文件已准备就绪，可以使用docker-compose启动服务"
echo "启动命令: docker-compose up -d"
echo "================================================" 